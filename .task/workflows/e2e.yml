version: "3"

tasks:
  # Generate all E2E tests from fixtures
  generate:all:
    desc: Generate all E2E tests from fixtures across all supported languages
    cmds:
      - task: rust:e2e:generate
      - task: python:e2e:generate
      - task: node:e2e:generate
      - task: go:e2e:generate
      - task: java:e2e:generate
      - task: csharp:e2e:generate
      - task: wasm:e2e:deno:generate
      - task: wasm:e2e:workers:generate
      - task: ruby:e2e:generate
      - task: php:e2e:generate

  # Run all E2E tests
  test:all:
    desc: Run all E2E tests across all supported languages
    cmds:
      - task: rust:e2e:test
      - task: python:e2e:test
      - task: node:e2e:test
      - task: go:e2e:test
      - task: java:e2e:test
      - task: csharp:e2e:test
      - task: wasm:e2e:deno:test
      - task: wasm:e2e:workers:test
      - task: ruby:e2e:test
      - task: php:e2e:test

  # Full E2E pipeline - generate + lint + test
  verify:all:
    desc: Full E2E pipeline - generate, lint, and test all suites
    cmds:
      - task: e2e:generate:all
      - task: e2e:lint:all
      - task: e2e:test:all

  # Lint all generated E2E tests
  lint:all:
    desc: Lint all generated E2E test code
    cmds:
      - task: rust:e2e:lint
      - task: python:e2e:lint
      - task: node:e2e:lint
      - task: go:e2e:lint
      - task: java:e2e:lint
      - task: csharp:e2e:lint
      - task: wasm:e2e:deno:lint
      - task: wasm:e2e:workers:lint
      - task: ruby:e2e:lint
      - task: php:e2e:lint

  # Rust E2E
  rust:generate:
    desc: Generate Rust E2E tests from fixtures
    cmds:
      - task: rust:e2e:generate

  rust:lint:
    desc: Lint Rust E2E code
    cmds:
      - task: rust:e2e:lint

  rust:test:
    desc: Run Rust E2E tests
    cmds:
      - task: rust:e2e:test

  rust:verify:
    desc: Full Rust E2E pipeline (generate + format + lint + test)
    cmds:
      - task: rust:e2e:generate
      - task: rust:e2e:format
      - task: rust:e2e:lint
      - task: rust:e2e:test

  # Python E2E (if tests exist)
  python:generate:
    desc: Generate Python E2E tests from fixtures
    cmds:
      - task: python:e2e:generate

  python:lint:
    desc: Lint Python E2E code
    cmds:
      - task: python:e2e:lint

  python:test:
    desc: Run Python E2E tests
    cmds:
      - task: python:e2e:test

  python:verify:
    desc: Full Python E2E pipeline (generate + lint + test)
    cmds:
      - task: python:e2e:generate
      - task: python:e2e:lint
      - task: python:e2e:test

  # Go E2E
  go:generate:
    desc: Generate Go E2E tests from fixtures
    cmds:
      - task: go:e2e:generate

  go:test:
    desc: Run Go E2E tests
    cmds:
      - task: go:e2e:test

  go:verify:
    desc: Full Go E2E pipeline (generate + test)
    cmds:
      - task: go:e2e:generate
      - task: go:e2e:test

  # Node E2E
  node:generate:
    desc: Generate Node E2E tests from fixtures
    cmds:
      - task: node:e2e:generate

  node:lint:
    desc: Lint Node E2E code
    cmds:
      - task: node:e2e:lint

  node:test:
    desc: Run Node E2E tests
    cmds:
      - task: node:e2e:test

  node:verify:
    desc: Full Node E2E pipeline (generate + lint + test)
    cmds:
      - task: node:e2e:generate
      - task: node:e2e:lint
      - task: node:e2e:test

  # Java E2E
  java:generate:
    desc: Generate Java E2E tests from fixtures
    cmds:
      - task: java:e2e:generate

  java:test:
    desc: Run Java E2E tests
    cmds:
      - task: java:e2e:test

  java:verify:
    desc: Full Java E2E pipeline (generate + test)
    cmds:
      - task: java:e2e:generate
      - task: java:e2e:test

  # C# E2E
  csharp:generate:
    desc: Generate C# E2E tests from fixtures
    cmds:
      - task: csharp:e2e:generate

  csharp:test:
    desc: Run C# E2E tests
    cmds:
      - task: csharp:e2e:test

  csharp:verify:
    desc: Full C# E2E pipeline (generate + test)
    cmds:
      - task: csharp:e2e:generate
      - task: csharp:e2e:test

  # WASM Deno E2E
  wasm:deno:generate:
    desc: Generate Deno WASM E2E tests from fixtures
    cmds:
      - task: wasm:e2e:deno:generate

  wasm:deno:lint:
    desc: Lint Deno WASM E2E code
    cmds:
      - task: wasm:e2e:deno:lint

  wasm:deno:test:
    desc: Run Deno WASM E2E tests
    cmds:
      - task: wasm:e2e:deno:test

  wasm:deno:verify:
    desc: Full Deno WASM E2E pipeline (build + generate + test)
    cmds:
      - task: wasm:build:deno
      - task: wasm:e2e:deno:generate
      - task: wasm:e2e:deno:test

  # WASM Cloudflare Workers E2E
  wasm:workers:generate:
    desc: Generate Cloudflare Workers WASM E2E tests from fixtures
    cmds:
      - task: wasm:e2e:workers:generate

  wasm:workers:lint:
    desc: Lint Cloudflare Workers WASM E2E code
    cmds:
      - task: wasm:e2e:workers:lint

  wasm:workers:test:
    desc: Run Cloudflare Workers WASM E2E tests
    cmds:
      - task: wasm:e2e:workers:test

  wasm:workers:verify:
    desc: Full Cloudflare Workers E2E pipeline (build + generate + test)
    cmds:
      - task: wasm:build
      - task: wasm:e2e:workers:generate
      - task: wasm:e2e:workers:test

  # WASM all E2E tests
  wasm:verify:
    desc: Verify all WASM test suites (Deno + Workers)
    cmds:
      - task: wasm:deno:verify
      - task: wasm:workers:verify

  # PHP E2E
  php:generate:
    desc: Generate PHP E2E tests from fixtures
    cmds:
      - task: php:e2e:generate

  php:test:
    desc: Run PHP E2E tests
    cmds:
      - task: php:e2e:test

  php:verify:
    desc: Full PHP E2E pipeline (generate + test)
    cmds:
      - task: php:e2e:generate
      - task: php:e2e:test

  # Quick E2E (core languages only)
  quick:
    desc: Run quick E2E tests (Rust + Go only)
    cmds:
      - task: rust:e2e:test
      - task: go:e2e:test

  quick:verify:
    desc: Full quick E2E pipeline (Rust + Go)
    cmds:
      - task: rust:e2e:verify
      - task: go:e2e:verify

  # Systems E2E (Rust + Go + C#)
  systems:
    desc: E2E test systems languages (Rust, Go, C#)
    cmds:
      - task: rust:e2e:test
      - task: go:e2e:test
      - task: csharp:e2e:test

  systems:verify:
    desc: Full systems E2E pipeline (generate + test)
    cmds:
      - task: rust:e2e:verify
      - task: go:e2e:verify
      - task: csharp:e2e:verify

  # JVM E2E (Java, C#, PHP)
  jvm:
    desc: E2E test JVM languages (Java, C#, PHP)
    cmds:
      - task: java:e2e:test
      - task: csharp:e2e:test
      - task: php:e2e:test

  jvm:verify:
    desc: Full JVM E2E pipeline (generate + test)
    cmds:
      - task: java:e2e:verify
      - task: csharp:e2e:verify
      - task: php:e2e:verify

  # WASM E2E only (both Deno and Workers)
  wasm:all:
    desc: Run all WASM E2E tests (Deno + Workers)
    cmds:
      - task: wasm:e2e:deno:test
      - task: wasm:e2e:workers:test

  wasm:all:verify:
    desc: Full WASM E2E pipeline (both Deno and Workers)
    cmds:
      - task: wasm:deno:verify
      - task: wasm:workers:verify

  # Ruby E2E
  ruby:generate:
    desc: Generate Ruby E2E tests from fixtures
    cmds:
      - task: ruby:e2e:generate

  ruby:lint:
    desc: Lint Ruby E2E code
    cmds:
      - task: ruby:e2e:lint

  ruby:test:
    desc: Run Ruby E2E tests
    cmds:
      - task: ruby:e2e:test

  ruby:verify:
    desc: Full Ruby E2E pipeline (generate + lint + test)
    cmds:
      - task: ruby:e2e:generate
      - task: ruby:e2e:lint
      - task: ruby:e2e:test
