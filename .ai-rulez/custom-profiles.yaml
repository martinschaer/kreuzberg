# Kreuzberg Custom Profiles
# Extends the shared extraction-library profile with kreuzberg-specific domains,
# skills, rules, and agents for document intelligence and extraction operations.

version: "3.0"

# Main Kreuzberg Extraction Profile
# Extends extraction-library.yaml profile from shared ai-rulez
# Adds kreuzberg-specific agents, domains, and configurations
kreuzberg-extraction:
  name: "Kreuzberg Extraction Intelligence"
  description: "Comprehensive profile for Kreuzberg document extraction library development. Extends the shared extraction-library profile with kreuzberg-specific document formats, OCR integration, plugin architecture, and multilingual support."

  # Parent profile: inherits all configuration from extraction-library.yaml
  extends:
    - extraction-library

  # Additional kreuzberg-specific domains beyond the parent profile
  domains:
    # Parent domains (inherited):
    # - rust-core
    # - ffi-bindings
    # - language-bindings
    # - build-distribution
    # - quality-verification
    # - documentation
    # - devops-infrastructure
    # - organizational

    # Kreuzberg-specific domain additions:
    - document-extraction      # Multi-format document extraction
    - ocr-integration          # OCR backend integration and optimization
    - plugin-system            # Plugin architecture and lifecycle
    - format-parsing           # Format-specific parsing strategies
    - multilingual-processing  # Multilingual document handling
    - image-processing         # Image preprocessing and enhancement
    - content-normalization    # Content cleanup and normalization
    - error-recovery           # Extraction error handling and recovery

  # Kreuzberg-specific agents
  # These agents are used alongside the parent profile's agents
  agents:
    # Parent agents (inherited from extraction-library):
    # - polyglot-architect (Sonnet)
    # - rust-core-engineer (Haiku)
    # - python-bindings-engineer (Haiku)
    # - typescript-bindings-engineer (Haiku)
    # - ruby-bindings-engineer (Haiku)
    # - java-bindings-engineer (Haiku)
    # - go-bindings-engineer (Haiku)
    # - test-automation-engineer (Haiku)
    # - code-reviewer (Haiku)
    # - docs-writer (Haiku)
    # - api-doc-writer (Haiku)
    # - tutorial-writer (Haiku)

    # Kreuzberg-specific agent additions:
    - document-extraction-specialist    # Haiku: Multi-format extraction expert
    - ocr-integration-specialist        # Haiku: OCR backend integration expert
    - plugin-system-architect           # Sonnet: Plugin architecture design

  # Additional kreuzberg-specific priority rules
  priority_rules:
    # Parent rules (inherited from extraction-library):
    # - rust-2024-edition-core-conversion-engine
    # - python-310-pyo3-binding-wrappers
    # - typescript-5x-napi-rs-bindings-cli
    # - ruby-32-magnus-native-bindings-with-rbs
    # - php-82-ext-php-rs-extension-composer-package
    # - polyglot-build-system-distribution
    # - dual-testing-strategy-core-bindings
    # - continuous-integration-coverage
    # - task-automation-workflow
    # - code-quality

    # Kreuzberg-specific rules:
    - document-extraction-format-parity
    - ocr-quality-benchmarking
    - plugin-system-safety-verification
    - multilingual-extraction-coverage
    - extraction-performance-profiling
    - format-regression-testing

  # Extended model routing for kreuzberg-specific tasks
  model_routing:
    # Parent routing (inherited):
    # architecture_decisions: sonnet
    # core_implementation: haiku
    # binding_implementation: haiku
    # testing: haiku
    # code_review: haiku
    # documentation: haiku

    # Kreuzberg-specific routing:
    extraction_design: sonnet              # Complex extraction pipeline design
    extraction_implementation: haiku        # Format-specific extractor implementation
    ocr_integration: haiku                 # OCR backend integration
    plugin_design: sonnet                  # Plugin interface and architecture
    plugin_implementation: haiku           # Plugin implementations
    image_processing: haiku                # Image preprocessing
    multilingual_support: haiku            # Language-specific extraction logic

  # Kreuzberg-specific quality gates
  quality_gates:
    # Parent gates (inherited):
    # rust_coverage_minimum: 95
    # binding_coverage_minimum: 80
    # test_types: [unit, integration, doc, e2e]
    # language_parity: true
    # documentation_required: true

    # Kreuzberg-specific gates:
    extraction_accuracy_minimum: 95         # Extraction accuracy threshold
    ocr_quality_metric_minimum: 90          # OCR quality metric (confidence/accuracy)
    format_support_parity: true             # All formats must support extraction
    plugin_compatibility_test_required: true # All plugins must pass compatibility tests
    multilingual_language_coverage: true    # Must support all claimed languages
    extraction_performance_regression: 5    # Max 5% performance regression allowed

  # Kreuzberg-specific presets (in addition to inherited presets)
  presets:
    # Parent presets (inherited):
    # - claude
    # - gemini
    # - codex

    # No additional presets needed - using parent's full set

  # Kreuzberg-specific configuration
  config:
    # Document format support configuration
    supported_formats:
      - pdf               # Adobe PDF
      - html              # HTML documents
      - markdown          # Markdown files
      - rst               # reStructuredText
      - xml               # XML documents
      - docx              # Microsoft Word
      - odt               # OpenDocument
      - epub              # eBook format
      - fiction-book      # FictionBook XML format
      - docbook           # DocBook XML format
      - jupyter           # Jupyter Notebooks

    # OCR configuration
    ocr_backend: tesseract
    ocr_languages:
      - english
      - german
      - spanish
      - french
      - italian
      - portuguese
      - dutch
      - russian
      - chinese_simplified
      - chinese_traditional
      - japanese
      - korean
      - arabic
      - hebrew

    # Plugin system configuration
    plugin_types:
      - DocumentExtractor     # Format-specific extractors
      - OcrBackend           # OCR engine backends
      - PostProcessor        # Content post-processing
      - Validator            # Content validation

    # Performance targets
    performance_targets:
      pdf_extraction_throughput: "1000 pages/minute"
      ocr_inference_latency: "100ms per page"
      html_extraction_latency: "50ms per document"

  # Kreuzberg-specific tags for filtering and identification
  tags:
    - document-extraction
    - ocr-integration
    - plugin-system
    - multilingual
    - production-grade
    - high-performance

  # Context-specific information for the profile
  context:
    use_cases:
      - Document intelligence and content extraction
      - OCR-based document digitization
      - Multilingual document processing
      - Plugin-based extensible architecture
      - High-throughput document processing pipelines

    target_users:
      - Document processing engineers
      - OCR/ML integration engineers
      - Plugin developers
      - Library maintainers
      - Integration specialists

    typical_workflows:
      - Implementing new document format extractors
      - Optimizing OCR accuracy and performance
      - Extending plugin system with new backend implementations
      - Building multilingual document processing pipelines
      - Integrating Kreuzberg into larger document systems
